{"version":3,"sources":["webpack:///../../../src/components/VTextarea/VTextarea.ts","webpack:///./src/components/template/disabledMixin.js","webpack:///./src/components/template/TTextarea.vue?a59e","webpack:///src/components/template/TTextarea.vue","webpack:///./src/components/template/TTextarea.vue?e686","webpack:///./src/components/template/TTextarea.vue"],"names":["baseMixins","name","props","autoGrow","noResize","rowHeight","type","Number","default","validator","v","isNaN","parseFloat","rows","parseInt","computed","classes","this","noResizeHandle","watch","lazyValue","$nextTick","mounted","setTimeout","methods","calculateInputHeight","input","$refs","height","minHeight","Math","genInput","onInput","onKeyDown","isFocused","e","data","Object","bindingData","deafult","formDisabled","Boolean","undefined","disabled","disabledConditions","handler","updateDisabledConditions","immediate","deep","newVal","conditions","getDisabled","conditionsClone","JSON","parse","stringify","CONDITIONS_STR","Error","calculateDisabledConditions","String","when","is","leftOperand","operands","shift","leftVal","operators","length","operator","rightOperand","rightVal","nextOperator","unshift","render","_vm","_h","$createElement","_c","_self","style","_b","on","elementFocus","model","value","callback","$$v","innerValue","expression","textareaAttrs","staticRenderFns","mixins","disabledMixin","width","margin","backgroundColor","dense","newValue","$emit","created","$store","commit","component","VFlex","VTextarea"],"mappings":"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","file":"js/chunk-2da9b080.ce8ada6e.js","sourcesContent":["// Styles\nimport './VTextarea.sass'\n\n// Extensions\nimport VTextField from '../VTextField/VTextField'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport Vue from 'vue'\n\ninterface options extends Vue {\n  $refs: {\n    input: HTMLTextAreaElement\n  }\n}\n\nconst baseMixins = mixins<options &\n  InstanceType<typeof VTextField>\n>(\n  VTextField\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-textarea',\n\n  props: {\n    autoGrow: Boolean,\n    noResize: Boolean,\n    rowHeight: {\n      type: [Number, String],\n      default: 24,\n      validator: (v: any) => !isNaN(parseFloat(v)),\n    },\n    rows: {\n      type: [Number, String],\n      default: 5,\n      validator: (v: any) => !isNaN(parseInt(v, 10)),\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-textarea': true,\n        'v-textarea--auto-grow': this.autoGrow,\n        'v-textarea--no-resize': this.noResizeHandle,\n        ...VTextField.options.computed.classes.call(this),\n      }\n    },\n    noResizeHandle (): boolean {\n      return this.noResize || this.autoGrow\n    },\n  },\n\n  watch: {\n    lazyValue () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n    rowHeight () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n  },\n\n  mounted () {\n    setTimeout(() => {\n      this.autoGrow && this.calculateInputHeight()\n    }, 0)\n  },\n\n  methods: {\n    calculateInputHeight () {\n      const input = this.$refs.input\n      if (!input) return\n\n      input.style.height = '0'\n      const height = input.scrollHeight\n      const minHeight = parseInt(this.rows, 10) * parseFloat(this.rowHeight)\n      // This has to be done ASAP, waiting for Vue\n      // to update the DOM causes ugly layout jumping\n      input.style.height = Math.max(minHeight, height) + 'px'\n    },\n    genInput () {\n      const input = VTextField.options.methods.genInput.call(this)\n\n      input.tag = 'textarea'\n      delete input.data!.attrs!.type\n      input.data!.attrs!.rows = this.rows\n\n      return input\n    },\n    onInput (e: Event) {\n      VTextField.options.methods.onInput.call(this, e)\n      this.autoGrow && this.calculateInputHeight()\n    },\n    onKeyDown (e: KeyboardEvent) {\n      // Prevents closing of a\n      // dialog when pressing\n      // enter\n      if (this.isFocused && e.keyCode === 13) {\n        e.stopPropagation()\n      }\n\n      this.$emit('keydown', e)\n    },\n  },\n})\n","export default {\r\n  props: {\r\n    data: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n    bindingData: {\r\n      type: Object,\r\n      deafult: () => {},\r\n    },\r\n    formDisabled: {\r\n      type: [Boolean, undefined],\r\n      default: undefined,\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    disabled() {\r\n      // 表單被 disabled 的條件 (this.disabled) 優先，\r\n      // 其次是元素的 disabled (this.data.dislabed)\r\n      // 最後才是條件式的 disabled\r\n      return (\r\n        this.formDisabled ??\r\n        (this.data.disabled !== \"conditions\"\r\n          ? this.data.disabled\r\n          : this.disabledConditions)\r\n      );\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      disabledConditions: null,\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    bindingData: {\r\n      handler(bindingData) {\r\n        const disabledConditions = this.data[\"disabledConditions\"];\r\n        this.updateDisabledConditions(disabledConditions, bindingData);\r\n      },\r\n      immediate: true,\r\n      deep: true,\r\n    },\r\n    \"data.disabledConditions\": {\r\n      handler(newVal) {\r\n        this.updateDisabledConditions(newVal, this.bindingData);\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    updateDisabledConditions(conditions, bindingData) {\r\n      this.disabledConditions = this.getDisabled(conditions, bindingData);\r\n    },\r\n    getDisabled(conditions, bindingData) {\r\n      if (!conditions) return;\r\n\r\n      let conditionsClone;\r\n\r\n      try {\r\n        //  prevent conditions from mutating\r\n        conditionsClone = JSON.parse(JSON.stringify(conditions));\r\n      } catch {\r\n        const CONDITIONS_STR = JSON.stringify(conditions, null, 2);\r\n        throw new Error(\r\n          `disabled conditions can't be parse. \\n ${CONDITIONS_STR}`\r\n        );\r\n      }\r\n\r\n      return this.calculateDisabledConditions(conditionsClone, bindingData);\r\n    },\r\n    // 考慮例外處理: conditions: null, undefined, {}, 過多的 operator, bindingData 找不到值\r\n    // 使用後序 (postfix) 的運算規則\r\n    calculateDisabledConditions(conditions, bindingData) {\r\n      if (!conditions) return;\r\n\r\n      if (\"when\" in conditions && \"is\" in conditions) {\r\n        return String(bindingData[conditions.when]) === String(conditions.is);\r\n      }\r\n\r\n      if (\"operators\" in conditions && \"operands\" in conditions) {\r\n        // 計算左值\r\n        const leftOperand = conditions.operands.shift();\r\n        let leftVal = this.calculateDisabledConditions(\r\n          leftOperand,\r\n          bindingData\r\n        );\r\n\r\n        while (conditions.operators.length) {\r\n          // 檢查運算元是否為 not，是的話則反向左值, 直到不是 not 為止\r\n          const operator = conditions.operators.shift();\r\n          if (operator === \"not\") {\r\n            leftVal = !leftVal;\r\n            continue;\r\n          }\r\n\r\n          // 計算右值\r\n          const rightOperand = conditions.operands.shift();\r\n          let rightVal = this.calculateDisabledConditions(\r\n            rightOperand,\r\n            bindingData\r\n          );\r\n\r\n          // 檢查下個運算元是否為 not，的話則反向右值，直到不是 not 為止\r\n          let nextOperator = conditions.operators.shift();\r\n          while (nextOperator === \"not\") {\r\n            rightVal = !rightVal;\r\n            nextOperator = conditions.operators.shift();\r\n          }\r\n          if (nextOperator) {\r\n            conditions.operators.unshift(nextOperator);\r\n          }\r\n\r\n          switch (operator) {\r\n            case \"and\":\r\n              leftVal = leftVal && rightVal;\r\n              break;\r\n            case \"or\":\r\n              leftVal = leftVal || rightVal;\r\n              break;\r\n            default:\r\n              throw new Error(`operator ${operator} is invalid.`);\r\n          }\r\n        }\r\n\r\n        return leftVal;\r\n      }\r\n\r\n      const CONDITIONS_STR = JSON.stringify(conditions, null, 2);\r\n      throw new Error(`conditions is invalid. \\n ${CONDITIONS_STR}`);\r\n    },\r\n  },\r\n};\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-flex',{style:(_vm.style)},[_c('v-textarea',_vm._b({on:{\"click\":_vm.elementFocus},model:{value:(_vm.innerValue),callback:function ($$v) {_vm.innerValue=$$v},expression:\"innerValue\"}},'v-textarea',_vm.textareaAttrs,false))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-flex :style=\"style\">\r\n    <v-textarea v-model=\"innerValue\" v-bind=\"textareaAttrs\" @click=\"elementFocus\"></v-textarea>\r\n  </v-flex>\r\n</template>\r\n\r\n<script>\r\nimport disabledMixin from \"./disabledMixin.js\";\r\n\r\nexport default {\r\n  name: \"TTextarea\",\r\n\r\n  props: {\r\n    data: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n    value: {\r\n      type: undefined,\r\n    },\r\n  },\r\n\r\n  mixins: [disabledMixin],\r\n\r\n  data() {\r\n    return {\r\n      style: {},\r\n      textareaAttrs: {},\r\n      innerValue: \"\",\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    disabled(disabled) {\r\n      this.textareaAttrs.disabled = disabled;\r\n    },\r\n    data: {\r\n      handler(data) {\r\n        this.style = {\r\n          width: data.width,\r\n          margin: data.margin,\r\n          backgroundColor: data.backgroundColor,\r\n        };\r\n        this.textareaAttrs = {\r\n          dense: data.dense,\r\n          autoGrow: data.autoGrow,\r\n          [data.style]: true,\r\n          noResize: data.noResize,\r\n          label: data.label,\r\n          hint: data.hint,\r\n          hideDetails: data.hideHint,\r\n          rows: data.rows,\r\n          disabled: this.disabled,\r\n        };\r\n      },\r\n      immediate: true,\r\n      deep: true,\r\n    },\r\n    value(newValue) {\r\n      this.innerValue = newValue;\r\n    },\r\n    innerValue(newValue) {\r\n      this.$emit(\"input\", newValue);\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.innerValue = this.value;\r\n  },\r\n  methods:{\r\n    elementFocus(){\r\n      this.$store.commit(\"formFocusElement\",this.data.bindingKey)\r\n    }\r\n  }\r\n};\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TTextarea.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TTextarea.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TTextarea.vue?vue&type=template&id=022b7e39&\"\nimport script from \"./TTextarea.vue?vue&type=script&lang=js&\"\nexport * from \"./TTextarea.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VFlex,VTextarea})\n"],"sourceRoot":""}