{"version":3,"sources":["webpack:///./src/components/template/disabledMixin.js","webpack:///./src/components/template/TTextField.vue?bdf8","webpack:///src/components/template/TTextField.vue","webpack:///./src/components/template/TTextField.vue?d521","webpack:///./src/components/template/TTextField.vue?7be1","webpack:///./src/components/template/TTextField.vue?eb1e"],"names":["props","data","type","Object","default","bindingData","deafult","formDisabled","Boolean","undefined","computed","disabled","this","disabledConditions","watch","handler","updateDisabledConditions","immediate","deep","newVal","methods","conditions","getDisabled","conditionsClone","JSON","parse","stringify","CONDITIONS_STR","Error","calculateDisabledConditions","String","when","is","leftOperand","operands","shift","leftVal","operators","length","operator","rightOperand","rightVal","nextOperator","unshift","render","_vm","_h","$createElement","_c","_self","style","_b","staticClass","class","textCenter","attrs","label","on","elementFocus","model","value","callback","$$v","innerValue","expression","staticRenderFns","name","mixins","disabledMixin","flexGrow","grow","flexShrink","shrink","flexBasis","marginTop","marginLeft","marginBottom","marginRight","backgroundColor","width","dense","newValue","$emit","created","$store","commit","component","VFlex","VTextField"],"mappings":"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","file":"js/chunk-903e62ea.bb589e61.js","sourcesContent":["export default {\r\n  props: {\r\n    data: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n    bindingData: {\r\n      type: Object,\r\n      deafult: () => {},\r\n    },\r\n    formDisabled: {\r\n      type: [Boolean, undefined],\r\n      default: undefined,\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    disabled() {\r\n      // 表單被 disabled 的條件 (this.disabled) 優先，\r\n      // 其次是元素的 disabled (this.data.dislabed)\r\n      // 最後才是條件式的 disabled\r\n      return (\r\n        this.formDisabled ??\r\n        (this.data.disabled !== \"conditions\"\r\n          ? this.data.disabled\r\n          : this.disabledConditions)\r\n      );\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      disabledConditions: null,\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    bindingData: {\r\n      handler(bindingData) {\r\n        const disabledConditions = this.data[\"disabledConditions\"];\r\n        this.updateDisabledConditions(disabledConditions, bindingData);\r\n      },\r\n      immediate: true,\r\n      deep: true,\r\n    },\r\n    \"data.disabledConditions\": {\r\n      handler(newVal) {\r\n        this.updateDisabledConditions(newVal, this.bindingData);\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    updateDisabledConditions(conditions, bindingData) {\r\n      this.disabledConditions = this.getDisabled(conditions, bindingData);\r\n    },\r\n    getDisabled(conditions, bindingData) {\r\n      if (!conditions) return;\r\n\r\n      let conditionsClone;\r\n\r\n      try {\r\n        //  prevent conditions from mutating\r\n        conditionsClone = JSON.parse(JSON.stringify(conditions));\r\n      } catch {\r\n        const CONDITIONS_STR = JSON.stringify(conditions, null, 2);\r\n        throw new Error(\r\n          `disabled conditions can't be parse. \\n ${CONDITIONS_STR}`\r\n        );\r\n      }\r\n\r\n      return this.calculateDisabledConditions(conditionsClone, bindingData);\r\n    },\r\n    // 考慮例外處理: conditions: null, undefined, {}, 過多的 operator, bindingData 找不到值\r\n    // 使用後序 (postfix) 的運算規則\r\n    calculateDisabledConditions(conditions, bindingData) {\r\n      if (!conditions) return;\r\n\r\n      if (\"when\" in conditions && \"is\" in conditions) {\r\n        return String(bindingData[conditions.when]) === String(conditions.is);\r\n      }\r\n\r\n      if (\"operators\" in conditions && \"operands\" in conditions) {\r\n        // 計算左值\r\n        const leftOperand = conditions.operands.shift();\r\n        let leftVal = this.calculateDisabledConditions(\r\n          leftOperand,\r\n          bindingData\r\n        );\r\n\r\n        while (conditions.operators.length) {\r\n          // 檢查運算元是否為 not，是的話則反向左值, 直到不是 not 為止\r\n          const operator = conditions.operators.shift();\r\n          if (operator === \"not\") {\r\n            leftVal = !leftVal;\r\n            continue;\r\n          }\r\n\r\n          // 計算右值\r\n          const rightOperand = conditions.operands.shift();\r\n          let rightVal = this.calculateDisabledConditions(\r\n            rightOperand,\r\n            bindingData\r\n          );\r\n\r\n          // 檢查下個運算元是否為 not，的話則反向右值，直到不是 not 為止\r\n          let nextOperator = conditions.operators.shift();\r\n          while (nextOperator === \"not\") {\r\n            rightVal = !rightVal;\r\n            nextOperator = conditions.operators.shift();\r\n          }\r\n          if (nextOperator) {\r\n            conditions.operators.unshift(nextOperator);\r\n          }\r\n\r\n          switch (operator) {\r\n            case \"and\":\r\n              leftVal = leftVal && rightVal;\r\n              break;\r\n            case \"or\":\r\n              leftVal = leftVal || rightVal;\r\n              break;\r\n            default:\r\n              throw new Error(`operator ${operator} is invalid.`);\r\n          }\r\n        }\r\n\r\n        return leftVal;\r\n      }\r\n\r\n      const CONDITIONS_STR = JSON.stringify(conditions, null, 2);\r\n      throw new Error(`conditions is invalid. \\n ${CONDITIONS_STR}`);\r\n    },\r\n  },\r\n};\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-flex',{style:(_vm.style)},[_c('v-text-field',_vm._b({staticClass:\"mx-2 \",class:{'centered-input': _vm.textCenter},attrs:{\"hide-details\":\"\",\"label\":_vm.label},on:{\"click\":_vm.elementFocus},model:{value:(_vm.innerValue),callback:function ($$v) {_vm.innerValue=$$v},expression:\"innerValue\"}},'v-text-field',_vm.attrs,false))],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-flex :style=\"style\" >\r\n    <v-text-field\r\n      v-model=\"innerValue\"\r\n      v-bind=\"attrs\"\r\n      class=\"mx-2 \"\r\n      hide-details\r\n      :label=\"label\"\r\n      :class=\"{'centered-input': textCenter}\"\r\n      @click=\"elementFocus\"\r\n    ></v-text-field>\r\n  </v-flex>\r\n</template>\r\n\r\n<script>\r\nimport disabledMixin from \"./disabledMixin.js\";\r\n\r\n\r\nexport default {\r\n  name: \"TTextField\",\r\n\r\n  props: {\r\n    data: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n    value: {\r\n      type: undefined,\r\n    },\r\n    formDisabled: {\r\n      type: [Boolean, undefined],\r\n      default: undefined,\r\n    },\r\n  },\r\n\r\n  mixins: [disabledMixin],\r\n\r\n  data() {\r\n    return {\r\n      style: {},\r\n      attrs: {},\r\n      innerValue: \"\",\r\n      label:\"\",\r\n      textCenter:false\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    disabled(disabled) {\r\n      this.attrs.disabled = disabled;\r\n    },\r\n    data: {\r\n      handler(data) {\r\n        this.style = {\r\n          flexGrow: data.grow,\r\n          flexShrink: data.shrink,\r\n          flexBasis: data.flexBasis,\r\n          marginTop: data.marginTop,\r\n          marginLeft: data.marginLeft,\r\n          marginBottom: data.marginBottom,\r\n          marginRight: data.marginRight,\r\n          backgroundColor: data.backgroundColor,\r\n          width: data.width,\r\n        };\r\n        this.attrs = {\r\n          disabled: this.disabled,\r\n          label: data.label,\r\n          dense: true,\r\n          [data.style]: true,\r\n        };\r\n        this.label = data.label;\r\n        this.textCenter = data.textCenter;\r\n      },\r\n      immediate: true,\r\n      deep: true,\r\n    },\r\n    value(newValue) {\r\n      this.innerValue = newValue;\r\n    },\r\n    innerValue(newValue) {\r\n      this.$emit(\"input\", newValue);\r\n    },\r\n  },\r\n\r\n  created() {\r\n    this.innerValue = this.value;\r\n  },\r\n  methods:{\r\n    elementFocus(){\r\n      this.$store.commit(\"formFocusElement\",this.data.bindingKey)\r\n    }\r\n  },\r\n  // computed: {\r\n  //   ...mapState(['formElementFocus']),\r\n  // }\r\n};\r\n</script>\r\n\r\n<style >\r\n  .centered-input input {\r\n    text-align: center;\r\n  }\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TTextField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TTextField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TTextField.vue?vue&type=template&id=317c71ea&\"\nimport script from \"./TTextField.vue?vue&type=script&lang=js&\"\nexport * from \"./TTextField.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TTextField.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VFlex,VTextField})\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TTextField.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}